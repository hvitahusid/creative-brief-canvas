<head>
    <title>Creative Brief Canvas</title>
</head>

<body>
    {{renderRouter}}
</body>

<template name="layout">
    {{yield}}
</template>

<template name="list">
    <div id="list">
        <table>
            <thead>
                <tr>
                    {{#each fields}}<th>{{label}}</th>{{/each}}
                </tr>
            </thead>

            <tbody>
                {{#each pages}}
                    <tr>
                    {{#each fields}}
                        <td><a href="/{{../id}}" title="{{label}}">{{value}}&nbsp;</a></td>
                    {{/each}}
                    </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</template>

<template name="field">
    <div class="field {{name}} {{#if icon}}has-icon{{/if}} {{#if focus}}focus{{/if}}">
        {{#constant}}
        <label for="field_{{name}}"><b>{{#if n}}{{n}}.{{/if}}</b>{{label}}</label>
        {{/constant}}

        {{#isolate}}
        {{#if input}}
            <input class="field-content" type="text" name="{{name}}" id="field_{{name}}" value="{{value}}" placeholder="{{placeholder}}">
        {{else}}
            <div class="textarea">
                {{#constant}}<div class="placeholder">{{{placeholder}}}</div>{{/constant}}
                <textarea class="field-content" name="{{name}}" id="field_{{name}}">{{value}}</textarea>
            </div>
        {{/if}}
        {{/isolate}}

        {{#isolate}}
        {{#unless input}}
            <div class="comments">
                <div class="close"></div>
                <div class="popup {{popupPosition}}">
                    <h1>ATHUGASEMDIR</h1>
                    {{#if popupPosition is left}}
                    <label for="field_{{name}}"><b>{{#if n}}{{n}}.{{/if}}</b>{{label}}</label>
                    {{/if}}
                    <div class="content-wrapper">
                        <div class="content">
                            {{#each comments}}
                            <div class="comment">
                                {{{content}}}
                                <div class="meta">
                                    <div class="user">{{{_user_name}}}</div>
                                    <div class="datetime">{{{timestamp}}}</div>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>

                    {{#constant}}
                    <div class="write-comment">
                        <input type="text" name="name" placeholder="Nafn">
                        <textarea name="comment" placeholder="Athugasemd"></textarea>
                    </div>
                    {{/constant}}
                </div>
            </div>
        {{/unless}}
        {{/isolate}}

        {{#constant}}
        {{#unless input}}
        <div class="about">
            <div class="close"></div>
            <div class="popup {{popupPosition}}">
                <h1>ÍTAREFNI</h1>
                {{#if popupPosition is left}}
                <label for="field_{{name}}"><b>{{#if n}}{{n}}.{{/if}}</b>{{label}}</label>
                {{/if}}
                <div class="content-wrapper">
                    <div class="content">{{{about}}}</div>
                </div>
            </div>
        </div>
        {{/unless}}
        {{/constant}}
    </div>
</template>

<template name="canvas">
    <div id="canvas">
        <header>
            <div class="left">
                {{#each fieldsets.top}}{{>field}}{{/each}}
            </div>

            <div class="right">
                {{#each fieldsets.topSmall}}{{>field}}{{/each}}

                <div class="logo">CREATIVE BRIEF /<br>HVÍTA HÚSIÐ</div>
            </div>
        </header>

        <div class="main">
            <div class="mid">
                {{#each fieldsets.main}}{{>field}}{{/each}}
            </div>

            <footer>
                <div class="left">
                    {{#each fieldsets.footer}}{{>field}}{{/each}}
                </div>
            </footer>
        </div>
    </div>
</template>
